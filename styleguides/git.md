# Git style guide

## Commit messages

Writing good commit messages is hugely helpful, for all of us and for future 
you. In addition, it's helpful for:

* new (or recently-returned) developers who want to understand things quickly
* interested people from elsewhere in the organisation who want to follow along
* members of the public (to the extent possible, we code in the open) who want to see our work,
  or learn from our practices
* any future developers (including you!) who want to see _why_ a change was
  made

### Recommended blog posts on this topic

* [5 useful tips for a better commit message](http://robots.thoughtbot.com/5-useful-tips-for-a-better-commit-message)
* [Every line of code is always documented](http://mislav.uniqpath.com/2014/02/hidden-documentation/)

### Content

A good commit message briefly summarises the "what" for scanning purposes, but
also includes the "why". If the "what" in the message isn't enough, the diff is
there as a fallback. This isn't true for the "why" of a change - this can be
much harder or impossible to reconstruct, but is usually the most important 
thing.

#### Links to issue trackers

A link to a ticket in an issue tracker can add useful context, but isn't an 
alternative to writing a commit message. The link might not continue to work in 
the future, so the commit message should stand on its own. 

If you are adding a link to a publicly-accessible repository, make sure the 
linked resource is publicly accessible.

### Structure

Start commit messages with a one-line summary no longer than 50
characters. Various Git tools (including GitHub) use this as the commit
summary. Format it like an email subject, with a leading capital
and no full stop. Write it in the present tense.

For example:

> Add .dockerignore and tell git to ignore assets

Leave a blank line before the rest of the commit message. Wrap the rest of the
commit message at around 72 characters; this makes it easier to view commit 
messages in a terminal.

#### Example

Taken from [Tim Pope’s guidelines](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html).

> Capitalized, short (50 chars or less) summary
>
> More detailed explanatory text, if necessary.  Wrap it to about 72
characters or so.  In some contexts, the first line is treated as the
subject of an email and the rest of the text as the body.  The blank
line separating the summary from the body is critical (unless you omit
the body entirely); tools like rebase can get confused if you run the
two together.
>
> Write your commit message in the present tense: "Fix bug" and not "Fixed
bug."  This convention matches up with commit messages generated by
commands like git merge and git revert.
>
> Further paragraphs come after blank lines.
>
> - Bullet points are okay, too
> - Typically a hyphen or asterisk is used for the bullet, preceded by a
>  single space, with blank lines in between, but conventions vary here
> - Use a hanging indent

## Branching/merging conventions

We work on feature [branches](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)
when we're making a change for a story or bug fix.

These branches are *yours*. The default policy is that you can do what you
like to them – including force pushing, unless you've agreed with someone
else that you won't.

This makes it easy to help your fellow developers by [rewriting](http://git-scm.com/book/en/Git-Tools-Rewriting-History) 
your commits regularly (perhaps using `git rebase --interactive`) so that they
make good sequential and logical sense when you issue a pull request.

Although it's sometimes hard to be disciplined, prefer smaller commits, which 
can be squashed together later. It's harder to break large commits up into 
smaller ones.

Smaller commits make git tools like `annotate` and `log` more useful. They
also increase the chance that the commit can be useful on its own. This is
frequently useful when you're working in parallel with another developer on
a separate branch and you both need early access to the same work. It makes
cherry-picking much easier.